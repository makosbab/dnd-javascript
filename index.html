<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DnD Monster Advancer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" /> -->
    <!--<script type="text/javascript" src="szornyek.json"></script> -->
    <script src="roll.js"></script>
    <script src="advancer.js"></script>
    <script type="text/javascript">

    fetch('monsters.json').then(function(response){
        return response.json()
        }
    ).then(function (json) {
        var monster = json[0];
        monster.hitPoints = monster.hitDice.avgHitPoints;
        monster.abilities.forEach(ability => {
            ability.modifier = (ability.score) ? Math.floor((ability.score - 10) / 2) : null;
        });
        monster.baseAttackModifier = function(){
            let lookup = creatureImprovement.find(function(impr){
                return impr.type == monster.type;
            });
            return Math.floor(monster.hitDice.numOfHitDice * lookup.attackBonus);
        }
        monster.attackModifierMelee = monster.baseAttackModifier() + monster.abilities[0].modifier + sizeModifiers[5].sizeModifier;
        adv = new Advancer(monster);
        console.log(adv.monster)

        //adv.advanceMonster(19);
    })
        
/*         var found = regexDobas.exec("8d6+45");
        regexDobas.lastIndex = 0;
        var dobas = new Dobas(found[1], found[2], found[3], found[4]);
        var tulajdonsag = new Tulajdonsag("√Åll", 19);
        tulajdonsag.ertek = 28;

        var tesztSzorny = monsters[0];
        tesztSzorny.szint = regexDobas.exec(tesztSzorny.eletero_dobas.dobas)[1];
        regexDobas.lastIndex = 0;
        //tesztSzorny.eletero_dobas.dobas
        fejlessz(tesztSzorny, 21) */
    </script>

</head>
<body>
    
    
</body>
</html>